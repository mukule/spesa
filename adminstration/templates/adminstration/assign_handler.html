{% extends 'main/base.html' %}
{% load static %}
{% load crispy_forms_tags %}

{% block content %}
<div id="free-quote1" class="free-quote1 py-5">

    <div class="container custom-container-01">
        <div class="row justify-content-center">
            <div class="col-lg-12">
                <div class="apply-form-inner">
                    <div class="row justify-content-between">
                        <!-- M-PESA payment procedure on the left -->
                        <div>
                            {% if messages %}
    {% for message in messages %}
        {% if message.tags == 'success' %}
            <div class="alert alert-success alert-dismissible" role="alert">
                <a href="#" class="close" data-dismiss="alert" aria-label="close">&times;</a>
                {{ message|safe|escape }}
            </div>
        {% elif message.tags == 'error' %}
            <div class="alert alert-danger alert-dismissible" role="alert">
                <a href="#" class="close" data-dismiss="alert" aria-label="close">&times;</a>
                {{ message|safe }}
            </div>
        {% elif message.tags == 'info' %}
            <div class="alert alert-info alert-dismissible" role="alert">
                <a href="#" class="close" data-dismiss="alert" aria-label="close">&times;</a>
                {{ message|safe|escape }}
            </div>
        {% elif message.tags == 'warning' %}
            <div class="alert alert-warning alert-dismissible" role="alert">
                <a href="#" class="close" data-dismiss="alert" aria-label="close">&times;</a>
                {{ message|safe|escape }}
            </div>
        {% endif %}
    {% endfor %}
{% endif %}
                        </div>

                        <div id="loading-indicator" class="text-center" style="display: none;">
                            <div class="spinner-border text-primary" role="status">
                                <span class="visually-hidden">Loading...</span>
                            </div>
                            <div class="alert alert-info" role="alert">Please Check your Phone for Mpesa Pop Up and Enter Pin to complete your Requst</div>
                        </div>
                        <div class="col-lg-4">
                            <div class="mpesa-info">
                                <h5 class="title">Assign a Handler</h5>
                                <ol>
                                    <li>Assign Handler</li>
                                    <li>Handler gets {{rate}} of the amount paind for the Request Ksh. {{consult.price}}</li>
                                    <li>If he Accepts the Assignment the Amount Reflects in His Wallet</li>
                                    <li>Incase he does not accept of Rejects the Assignment, You can Re-assign The request to another handler</li>
                                    <li>Note that you can only assign a paid for Request</li>
                                </ol>
                               
                            </div>
                        </div>
                        <!-- Form on the right -->
                        <div class="col-lg-8">
                            <div class="contact-form">
                                <form id="consultation-form" class="form" method="POST">
                                    {% csrf_token %}
                                    <div class="part">
                                        <h5 class="title text-center"></h5>
                                        <p class="text-center mt-0">Assign the request of {{consult.user.username}} of {{consult.category}} to a handler</p>
                                        <p class="text-center alert alert-info">Request Description <br/>{{consult.description|safe}}</p>
                                        <div class="form-element">
                                            <div class="row mt-3 mb-3">
                                                <div class="col-lg-12">
                                                    {{ form.handler|as_crispy_field }}
                                                </div>
                                
                                            </div>
                                        </div>
                                    </div>
                                    <div class="form-submit text-center">
                                        <button id="submit-btn" type="submit" class="btn btn-primary btn-active">Submit</button>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

</div>

{% endblock content %}
